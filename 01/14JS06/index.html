<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>第二十五天到第二十七天--倒数开始滴答滴滴答滴</title>
<style>
</style>
</head>
<body>
    <select id="year-select">
    	<option value="2000">2000</option>
    	<option value="2001">2001</option>
    	<option value="2002">2002</option>
    	<option value="2003">2003</option>
    	<option value="2004">2004</option>
    	<option value="2005">2005</option>
    	<option value="2006">2006</option>
    	<option value="2007">2007</option>
    	<option value="2008">2008</option>
    	<option value="2009">2009</option>
    	<option value="2010">2010</option>
    	<option value="2011">2011</option>
    	<option value="2012">2012</option>
    	<option value="2013">2013</option>
    	<option value="2014">2014</option>
    	<option value="2015">2015</option>
    	<option value="2016">2016</option>
    	<option value="2017">2017</option>
    	<option value="2018">2018</option>
    </select>

    <select id="day-select">
    	<option value="1">1</option>
    	<option value="2">2</option>
    	<option value="3">3</option>
    	<option value="4">4</option>
    	<option value="5">5</option>
    	<option value="6">6</option>
    	<option value="7">7</option>
    	<option value="8">8</option>
    	<option value="9">9</option>
    	<option value="10">10</option>
    	<option value="11">11</option>
    	<option value="12">12</option>
    	<option value="13">13</option>
    	<option value="14">14</option>
    	<option value="15">15</option>
    	<option value="16">16</option>
    	<option value="17">17</option>
    	<option value="18">18</option>
    	<option value="19">19</option>
    	<option value="20">20</option>
    	<option value="21">21</option>
    	<option value="22">22</option>
    	<option value="23">23</option>
    	<option value="24">24</option>
    	<option value="25">25</option>
    	<option value="26">26</option>
    	<option value="27">27</option>
    	<option value="28">28</option>
    	<option value="29">29</option>
    	<option value="30">30</option>
    	<option value="31">31</option>
    </select>

    <select id="minite-select">
    	<option value="0">0</option>
    	<option value="1">1</option>
    	<option value="2">2</option>
    	<option value="3">3</option>
    	<option value="4">4</option>
    	<option value="5">5</option>
    	<option value="6">6</option>
    	<option value="7">7</option>
    	<option value="8">8</option>
    	<option value="9">9</option>
    	<option value="10">10</option>
    	<option value="11">11</option>
    	<option value="12">12</option>
    	<option value="13">13</option>
    	<option value="14">14</option>
    	<option value="15">15</option>
    	<option value="16">16</option>
    	<option value="17">17</option>
    	<option value="18">18</option>
    	<option value="19">19</option>
    	<option value="20">20</option>
    	<option value="21">21</option>
    	<option value="22">22</option>
    	<option value="23">23</option>
    	<option value="24">24</option>
    	<option value="25">25</option>
    	<option value="26">26</option>
    	<option value="27">27</option>
    	<option value="28">28</option>
    	<option value="29">29</option>
    	<option value="30">30</option>
    	<option value="31">31</option>
    	<option value="32">32</option>
    	<option value="33">33</option>
    	<option value="34">34</option>
    	<option value="35">35</option>
    	<option value="36">36</option>
    	<option value="37">37</option>
    	<option value="38">38</option>
    	<option value="39">39</option>
    	<option value="40">40</option>
    	<option value="41">41</option>
    	<option value="42">42</option>
    	<option value="43">43</option>
    	<option value="44">44</option>
    	<option value="45">45</option>
    	<option value="46">46</option>
    	<option value="47">47</option>
    	<option value="48">48</option>
    	<option value="49">49</option>
    	<option value="50">50</option>
    	<option value="51">51</option>
    	<option value="52">52</option>
    	<option value="53">53</option>
    	<option value="54">54</option>
    	<option value="55">55</option>
    	<option value="56">56</option>
    	<option value="57">57</option>
    	<option value="58">58</option>
    	<option value="59">59</option>
    </select>

    <select id="second-select">
    	<option value="0">0</option>
    	<option value="1">1</option>
    	<option value="2">2</option>
    	<option value="3">3</option>
    	<option value="4">4</option>
    	<option value="5">5</option>
    	<option value="6">6</option>
    	<option value="7">7</option>
    	<option value="8">8</option>
    	<option value="9">9</option>
    	<option value="10">10</option>
    	<option value="11">11</option>
    	<option value="12">12</option>
    	<option value="13">13</option>
    	<option value="14">14</option>
    	<option value="15">15</option>
    	<option value="16">16</option>
    	<option value="17">17</option>
    	<option value="18">18</option>
    	<option value="19">19</option>
    	<option value="20">20</option>
    	<option value="21">21</option>
    	<option value="22">22</option>
    	<option value="23">23</option>
    	<option value="24">24</option>
    	<option value="25">25</option>
    	<option value="26">26</option>
    	<option value="27">27</option>
    	<option value="28">28</option>
    	<option value="29">29</option>
    	<option value="30">30</option>
    	<option value="31">31</option>
    	<option value="32">32</option>
    	<option value="33">33</option>
    	<option value="34">34</option>
    	<option value="35">35</option>
    	<option value="36">36</option>
    	<option value="37">37</option>
    	<option value="38">38</option>
    	<option value="39">39</option>
    	<option value="40">40</option>
    	<option value="41">41</option>
    	<option value="42">42</option>
    	<option value="43">43</option>
    	<option value="44">44</option>
    	<option value="45">45</option>
    	<option value="46">46</option>
    	<option value="47">47</option>
    	<option value="48">48</option>
    	<option value="49">49</option>
    	<option value="50">50</option>
    	<option value="51">51</option>
    	<option value="52">52</option>
    	<option value="53">53</option>
    	<option value="54">54</option>
    	<option value="55">55</option>
    	<option value="56">56</option>
    	<option value="57">57</option>
    	<option value="58">58</option>
    	<option value="59">59</option>
    </select>
    <p id="result-wrapper">现在距离2001年1月1日星期X  HH:MM:SS 还有X天X小时X分X秒</p>
<script>
	    'use strict'
    var yearSelect = document.getElementById('year-select')
    var monthSelect = document.getElementById('month-select')
    var daySelect = document.getElementById('day-select')
    var hourSelect = document.getElementById('hour-select')
    var miniteSelect = document.getElementById('minite-select')
    var secondSelect = document.getElementById('second-select')
    var result = document.getElementById('result-wrapper')
    function addOption(target, start, end) {
      var html = ''
      for (var i = start; i <= end; i++) {
        html += '<option value="' + i + '">' + i + '</option>'
      }
      target.innerHTML = html
    }
    function initSelect() {
      addOption(yearSelect, 2000, 2032)
      addOption(monthSelect, 1, 12)
      addOption(daySelect, 1, 31)
      addOption(hourSelect, 0, 23)
      addOption(miniteSelect, 0, 59)
      addOption(secondSelect, 0, 59)
    }
    function hiddenDay() {
      var monthWithout31 = [2, 4, 6, 9, 11]
      daySelect[28].style = ''
      daySelect[29].style = ''
      daySelect[30].style = ''
      for (var i in monthWithout31) {
        if (monthSelect.value == monthWithout31[i]) {
          daySelect[30].style.display = 'none'
          break
        }
      }
      if (monthSelect.value == 2) {
        var year = yearSelect.value
        daySelect[29].style.display = 'none'
        if ((year % (year % 100 ? 4 : 400))) {
          daySelect[28].style.display = 'none'
        }
      }
    }
    function fillTime(val) {
      val = val.toString()
      if (val.length < 2) {
        val = '0' + val
      }
      return val
    }
    function formatDate(timeData) {
      var year = timeData.getFullYear()
      var month = timeData.getMonth() + 1
      var date = timeData.getDate()
      var day = timeData.getDay()
      var hours = fillTime(timeData.getHours())
      var minutes = fillTime(timeData.getMinutes())
      var seconds = fillTime(timeData.getSeconds())
      var arr = ['天', '一', '二', '三', '四', '五', '六']
      return '现在距离 ' + year + '年' + month + '月' + date + '日星期' + arr[day] + ' ' + hours + ':' + minutes + ':' + seconds
    }
    function calcDate(timeVal) {
      var baseDay = 24 * 60 * 60 * 1000
      var baseHours = 60 * 60 * 1000
      var baseMinutes = 60 * 1000
      var baseSeconds = 1000
      var day = Math.floor(timeVal / baseDay)
      timeVal = timeVal % baseDay
      var hours = Math.floor(timeVal / baseHours)
      timeVal = timeVal % baseHours
      var minutes = Math.floor(timeVal / baseMinutes)
      timeVal = timeVal % baseMinutes
      var seconds = Math.floor(timeVal / baseSeconds)
      return day + " 天 " + hours + " 小时 " + minutes + " 分 " + seconds + " 秒"
    }
    function calculateTime() {
      var selectDate = new Date(
        yearSelect.value,
        monthSelect.value - 1,
        daySelect.value,
        hourSelect.value,
        miniteSelect.value,
        secondSelect.value
      )
      var nowDate = new Date()
      var differ = selectDate - nowDate
      var differDesc = ''
      if (differ > 0) {
        differDesc = '还有'
      }
      else {
        differDesc = '过去'
        differ = Math.abs(differ)
      }
      return formatDate(selectDate) + ' ' + differDesc + ' ' + calcDate(differ)
    }
    initSelect()
    var timer = setInterval(function () {
      result.innerHTML = calculateTime()
    }, 500)
    yearSelect.addEventListener('change', hiddenDay)
    monthSelect.addEventListener('change', hiddenDay)
</script>    
</body>
</html>
